{% extends "base.html" %}
{% load static %}
{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<link rel="stylesheet" href="{% static 'css/base.css' %}">
<style>
    body {
        font-family: 'Montserrat Alternates', sans-serif;
    }
    
    .btn-primary {
        background-color: #4E067F;
        color: white;
        border: none;
    }

    .btn-primary:hover {
        background-color: #4E067F;
        color: white;
        border: none;
        box-shadow: rgba(53, 5, 48, 0.4) 0px 2px 4px, rgba(53, 5, 48, 0.4) 0px 7px 13px -3px, rgba(53, 5, 48, 0.4) 0px -3px 0px inset;
    }
        
    .btn-primary {
        background-color: #4E067F;
        color: white;
        border: none;
    }

    .btn-primary:hover {
        background-color: #4E067F;
        color: white;
        border: none;
        box-shadow: rgba(53, 5, 48, 0.4) 0px 2px 4px, rgba(53, 5, 48, 0.4) 0px 7px 13px -3px, rgba(53, 5, 48, 0.4) 0px -3px 0px inset;
    }
          
    .btn-edit {
        background-color: #5A189A;
        color: white;
        border: none;
        margin-bottom: 10px;
    }

    .btn-edit:hover {
        background-color: #5A189A;
        color: white;
        border: none;
        box-shadow: rgba(53, 5, 48, 0.4) 0px 2px 4px, rgba(53, 5, 48, 0.4) 0px 7px 13px -3px, rgba(53, 5, 48, 0.4) 0px -3px 0px inset;
    }
</style>
<script>
    $(document).ready(function() {
        // Disable all form fields initially
        $('#user-form input').prop('disabled', true);

        // Enable fields when edit button is clicked
        $('#edit-button').click(function() {
            $('#user-form input').prop('disabled', false);
            $('#edit-button').hide();
            $('#save-button').show();
        });
    });
</script>
    <div class="card">
        <div class="card-body">
            <h1 class="card-title text-center">Личный кабинет</h1>

            <form id="user-form" action="." method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    <label for="first_name">ФИО:</label>
                    <input type="text" class="form-control" id="first_name" name="first_name" value="{{ user.first_name }}">
                </div>
                <div class="form-group">
                    <label for="date">Дата рождения:</label>
                    {{ profile_form.date_of_birth }}
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}">
                </div>
                <button type="button" id="edit-button" class="btn btn-edit">Редактировать</button>
                <button type="submit" id="save-button" class="btn btn-primary mb-2 " style="display:none;">Сохранить изменения</button><br>
                <a href="{% url 'orders:user_orders' %}" type="submit" class="text-end btn btn-primary">Мои заказы</a>
                <a href="{% url 'account:logout' %}" type="submit" class="text-center btn btn-secondary">Выйти</a>   
            </form>
        </div>
    </div>
    
{% endblock %}
